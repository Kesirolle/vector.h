<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Ion: base/staticsafedeclare.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Ion
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('staticsafedeclare_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#namespaces">Namespaces</a> &#124;
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle">
<div class="title">staticsafedeclare.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br/>
<code>#include &lt;type_traits&gt;</code><br/>
<code>#include &lt;vector&gt;</code><br/>
<code>#include &quot;<a class="el" href="lockguards_8h_source.html">ion/base/lockguards.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="shareable_8h_source.html">ion/base/shareable.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="sharedptr_8h_source.html">ion/base/sharedptr.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="base_2static__assert_8h_source.html">ion/base/static_assert.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="atomic_8h_source.html">ion/port/atomic.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="mutex_8h_source.html">ion/port/mutex.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for staticsafedeclare.h:</div>
<div class="dyncontent">
<div class="center"><img src="staticsafedeclare_8h__incl.png" border="0" usemap="#base_2staticsafedeclare_8h" alt=""/></div>
<map name="base_2staticsafedeclare_8h" id="base_2staticsafedeclare_8h">
<area shape="rect" id="node5" href="lockguards_8h.html" title="ion/base/lockguards.h" alt="" coords="408,80,556,107"/><area shape="rect" id="node8" href="atomic_8h.html" title="ion/port/atomic.h" alt="" coords="526,229,644,256"/><area shape="rect" id="node10" href="mutex_8h.html" title="ion/port/mutex.h" alt="" coords="193,229,308,256"/><area shape="rect" id="node15" href="shareable_8h.html" title="ion/base/shareable.h" alt="" coords="771,155,913,181"/><area shape="rect" id="node22" href="sharedptr_8h.html" title="ion/base/sharedptr.h" alt="" coords="882,80,1021,107"/><area shape="rect" id="node24" href="base_2static__assert_8h.html" title="ion/base/static_assert.h" alt="" coords="1090,80,1251,107"/><area shape="rect" id="node7" href="readwritelock_8h.html" title="ion/base/readwritelock.h" alt="" coords="312,155,475,181"/><area shape="rect" id="node14" href="spinmutex_8h.html" title="ion/base/spinmutex.h" alt="" coords="499,155,645,181"/><area shape="rect" id="node12" href="semaphore_8h.html" title="ion/port/semaphore.h" alt="" coords="333,229,477,256"/><area shape="rect" id="node16" href="base_2logging_8h.html" title="Copyright 2016 Google Inc. " alt="" coords="1014,229,1140,256"/><area shape="rect" id="node21" href="port_2logging_8h.html" title="ion/port/logging.h" alt="" coords="893,304,1013,331"/><area shape="rect" id="node25" href="port_2static__assert_8h.html" title="ion/port/static_assert.h" alt="" coords="1139,155,1292,181"/></map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="staticsafedeclare_8h__dep__incl.png" border="0" usemap="#base_2staticsafedeclare_8hdep" alt=""/></div>
<map name="base_2staticsafedeclare_8hdep" id="base_2staticsafedeclare_8hdep">
<area shape="rect" id="node2" href="allocatable_8cc.html" title="base/allocatable.cc" alt="" coords="5,80,139,107"/><area shape="rect" id="node3" href="allocationmanager_8cc.html" title="base/allocationmanager.cc" alt="" coords="163,80,340,107"/><area shape="rect" id="node4" href="datacontainer_8cc.html" title="base/datacontainer.cc" alt="" coords="365,80,515,107"/><area shape="rect" id="node5" href="base_2logging_8cc.html" title="base/logging.cc" alt="" coords="539,80,652,107"/><area shape="rect" id="node6" href="memoryzipstream_8cc.html" title="base/memoryzipstream.cc" alt="" coords="677,80,853,107"/><area shape="rect" id="node7" href="once_8h.html" title="base/once.h" alt="" coords="928,80,1021,107"/><area shape="rect" id="node8" href="graphicsmanager_8cc.html" title="gfx/graphicsmanager.cc" alt="" coords="810,155,971,181"/><area shape="rect" id="node10" href="settingmanager_8cc.html" title="base/settingmanager.cc" alt="" coords="1046,80,1207,107"/><area shape="rect" id="node11" href="staticsafedeclare_8cc.html" title="base/staticsafedeclare.cc" alt="" coords="1232,80,1403,107"/><area shape="rect" id="node12" href="zipassetmanager_8cc.html" title="base/zipassetmanager.cc" alt="" coords="1427,80,1597,107"/><area shape="rect" id="node13" href="renderer_8cc.html" title="gfx/renderer.cc" alt="" coords="1621,80,1731,107"/><area shape="rect" id="node14" href="shaderinputregistry_8cc.html" title="gfx/shaderinputregistry.cc" alt="" coords="1755,80,1927,107"/><area shape="rect" id="node15" href="gpuprofiler_8h.html" title="gfxprofile/gpuprofiler.h" alt="" coords="1779,155,1929,181"/><area shape="rect" id="node17" href="profiling_8h.html" title="profile/profiling.h" alt="" coords="2053,80,2169,107"/><area shape="rect" id="node18" href="profiling_8cc.html" title="profile/profiling.cc" alt="" coords="1954,155,2077,181"/><area shape="rect" id="node19" href="vsyncprofiler_8cc.html" title="profile/vsyncprofiler.cc" alt="" coords="2301,155,2453,181"/><area shape="rect" id="node21" href="visual_8cc.html" title="portgfx/visual.cc" alt="" coords="2246,80,2364,107"/><area shape="rect" id="node22" href="fontimage_8cc.html" title="text/fontimage.cc" alt="" coords="2389,80,2512,107"/><area shape="rect" id="node23" href="freetypefont_8cc.html" title="text/freetypefont.cc" alt="" coords="2537,80,2671,107"/><area shape="rect" id="node9" href="remoteserver_8cc.html" title="remote/remoteserver.cc" alt="" coords="996,155,1155,181"/><area shape="rect" id="node16" href="gpuprofiler_8cc.html" title="gfxprofile/gpuprofiler.cc" alt="" coords="1776,229,1933,256"/><area shape="rect" id="node20" href="calltracehandler_8cc.html" title="remote/calltracehandler.cc" alt="" coords="2102,155,2276,181"/></map>
</div>
</div>
<p><a href="staticsafedeclare_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classion_1_1base_1_1_static_deleter_base.html">ion::base::StaticDeleterBase</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classion_1_1base_1_1_static_deleter.html">ion::base::StaticDeleter&lt; T &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This class should not be used directly.  <a href="classion_1_1base_1_1_static_deleter.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classion_1_1base_1_1_static_deleter_3_01_t[]_4.html">ion::base::StaticDeleter&lt; T[]&gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Specialization for arrays.  <a href="classion_1_1base_1_1_static_deleter_3_01_t[]_4.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classion_1_1base_1_1_static_deleter_deleter.html">ion::base::StaticDeleterDeleter</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classion_1_1base_1_1_static_deleter_deleter.html" title="StaticDeleterDeleter is an internal class that holds and deletes StaticDeleters; it should not be use...">StaticDeleterDeleter</a> is an internal class that holds and deletes StaticDeleters; it should not be used directly.  <a href="classion_1_1base_1_1_static_deleter_deleter.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespaceion"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceion.html">ion</a></td></tr>
<tr class="memdesc:namespaceion"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copyright 2016 Google Inc. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespaceion_1_1base"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceion_1_1base.html">ion::base</a></td></tr>
<tr class="memdesc:namespaceion_1_1base"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classion_1_1base_1_1_enum_helper.html" title="}; static const char* kStrings[] = { &quot;Value1&quot;, &quot;Value2&quot;, &quot;Value3&quot; }; return EnumData&lt;Values&gt;(IndexMap...">EnumHelper</a> instantiations. These must be in the <a class="el" href="namespaceion_1_1base.html" title="EnumHelper instantiations. These must be in the ion::base namespace. ">ion::base</a> namespace. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a7c9d62f0fdfa9f872c0be86110a97a2c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="staticsafedeclare_8h.html#a7c9d62f0fdfa9f872c0be86110a97a2c">ION_SAFE_ASSIGN_STATIC_POINTER</a>(<a class="el" href="tracinghandler_8cc.html#ab6f4e6d3fde00ce906e46494f60dfe7a">type</a>, variable, new_variable, add_func, destroyer)</td></tr>
<tr class="memdesc:a7c9d62f0fdfa9f872c0be86110a97a2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copyright 2016 Google Inc.  <a href="#a7c9d62f0fdfa9f872c0be86110a97a2c">More...</a><br/></td></tr>
<tr class="separator:a7c9d62f0fdfa9f872c0be86110a97a2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61710c07e72109c2b6810e3192e526a6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="staticsafedeclare_8h.html#a61710c07e72109c2b6810e3192e526a6">ION_DECLARE_SAFE_STATIC</a>(<a class="el" href="tracinghandler_8cc.html#ab6f4e6d3fde00ce906e46494f60dfe7a">type</a>, variable, constructor, add_func, destroyer)</td></tr>
<tr class="memdesc:a61710c07e72109c2b6810e3192e526a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Declares and thread-safely assigns the value of a static variable.  <a href="#a61710c07e72109c2b6810e3192e526a6">More...</a><br/></td></tr>
<tr class="separator:a61710c07e72109c2b6810e3192e526a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75fb1742f40edab3be7662c85c42b605"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="staticsafedeclare_8h.html#a75fb1742f40edab3be7662c85c42b605">ION_DECLARE_SAFE_STATIC_ARRAY</a>(<a class="el" href="tracinghandler_8cc.html#ab6f4e6d3fde00ce906e46494f60dfe7a">type</a>, variable, count)</td></tr>
<tr class="memdesc:a75fb1742f40edab3be7662c85c42b605"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use the below ION_DECLARE_STATIC to declare static variables.  <a href="#a75fb1742f40edab3be7662c85c42b605">More...</a><br/></td></tr>
<tr class="separator:a75fb1742f40edab3be7662c85c42b605"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0c4d1e0fc76f7ea923240084c166b4c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="staticsafedeclare_8h.html#aa0c4d1e0fc76f7ea923240084c166b4c">ION_DECLARE_SAFE_STATIC_POINTER</a>(<a class="el" href="tracinghandler_8cc.html#ab6f4e6d3fde00ce906e46494f60dfe7a">type</a>, variable)</td></tr>
<tr class="memdesc:aa0c4d1e0fc76f7ea923240084c166b4c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Declare a static non-array pointer and calls a default constructor.  <a href="#aa0c4d1e0fc76f7ea923240084c166b4c">More...</a><br/></td></tr>
<tr class="separator:aa0c4d1e0fc76f7ea923240084c166b4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09452e33f7fe6f55ae0bc4ca75152dac"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="staticsafedeclare_8h.html#a09452e33f7fe6f55ae0bc4ca75152dac">ION_DECLARE_SAFE_STATIC_POINTER_WITH_CONSTRUCTOR</a>(<a class="el" href="tracinghandler_8cc.html#ab6f4e6d3fde00ce906e46494f60dfe7a">type</a>, variable, constructor)</td></tr>
<tr class="memdesc:a09452e33f7fe6f55ae0bc4ca75152dac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Declare a static non-array pointer and calls a non-default constructor.  <a href="#a09452e33f7fe6f55ae0bc4ca75152dac">More...</a><br/></td></tr>
<tr class="separator:a09452e33f7fe6f55ae0bc4ca75152dac"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a61710c07e72109c2b6810e3192e526a6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ION_DECLARE_SAFE_STATIC</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="tracinghandler_8cc.html#ab6f4e6d3fde00ce906e46494f60dfe7a">type</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">variable, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">constructor, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">add_func, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">destroyer&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keyword">static</span> std::atomic&lt;type&gt; atomic_##variable; <span class="comment">/* Zero-initialized */</span>     <a class="code" href="base_2static__assert_8h.html#aadc658a4f97508a2b73179b8b78fc2b9">\</a></div>
<div class="line"><a class="code" href="base_2static__assert_8h.html#aadc658a4f97508a2b73179b8b78fc2b9">  ION_STATIC_ASSERT</a>(<a class="code" href="benchmarkutils_8cc.html#aee90379adb0307effb138f4871edbc5c">std::is_pointer&lt;type&gt;::value</a>,                        \</div>
<div class="line">                    <span class="stringliteral">&quot;static variables must be of pointer type&quot;</span>);         <a class="code" href="printer_8cc.html#a75b160f574a0be26114bae2c7686a5e1">\</a></div>
<div class="line"><a class="code" href="printer_8cc.html#a75b160f574a0be26114bae2c7686a5e1">  type</a> variable = atomic_##variable.load(std::memory_order_acquire);     \</div>
<div class="line">  if (variable == 0) {                                                   <a class="code" href="printer_8cc.html#a75b160f574a0be26114bae2c7686a5e1">\</a></div>
<div class="line"><a class="code" href="printer_8cc.html#a75b160f574a0be26114bae2c7686a5e1">    type</a> new_##variable = constructor;                                   <a class="code" href="staticsafedeclare_8h.html#a7c9d62f0fdfa9f872c0be86110a97a2c">\</a></div>
<div class="line"><a class="code" href="staticsafedeclare_8h.html#a7c9d62f0fdfa9f872c0be86110a97a2c">    ION_SAFE_ASSIGN_STATIC_POINTER</a>(                                      \</div>
<div class="line">        <a class="code" href="printer_8cc.html#a75b160f574a0be26114bae2c7686a5e1">type</a>, atomic_##variable, new_##variable, add_func, destroyer);   \</div>
<div class="line">    variable = atomic_##variable.load(std::memory_order_acquire);        \</div>
<div class="line">  }</div>
<div class="ttc" id="staticsafedeclare_8h_html_a7c9d62f0fdfa9f872c0be86110a97a2c"><div class="ttname"><a href="staticsafedeclare_8h.html#a7c9d62f0fdfa9f872c0be86110a97a2c">ION_SAFE_ASSIGN_STATIC_POINTER</a></div><div class="ttdeci">#define ION_SAFE_ASSIGN_STATIC_POINTER(type, variable, new_variable, add_func, destroyer)</div><div class="ttdoc">Copyright 2016 Google Inc. </div><div class="ttdef"><b>Definition:</b> <a href="staticsafedeclare_8h_source.html#l00070">staticsafedeclare.h:70</a></div></div>
<div class="ttc" id="printer_8cc_html_a75b160f574a0be26114bae2c7686a5e1"><div class="ttname"><a href="printer_8cc.html#a75b160f574a0be26114bae2c7686a5e1">type</a></div><div class="ttdeci">std::string type</div><div class="ttdef"><b>Definition:</b> <a href="printer_8cc_source.html#l00353">printer.cc:353</a></div></div>
<div class="ttc" id="benchmarkutils_8cc_html_aee90379adb0307effb138f4871edbc5c"><div class="ttname"><a href="benchmarkutils_8cc.html#aee90379adb0307effb138f4871edbc5c">value</a></div><div class="ttdeci">double value</div><div class="ttdef"><b>Definition:</b> <a href="benchmarkutils_8cc_source.html#l00063">benchmarkutils.cc:63</a></div></div>
<div class="ttc" id="base_2static__assert_8h_html_aadc658a4f97508a2b73179b8b78fc2b9"><div class="ttname"><a href="base_2static__assert_8h.html#aadc658a4f97508a2b73179b8b78fc2b9">ION_STATIC_ASSERT</a></div><div class="ttdeci">#define ION_STATIC_ASSERT(expr, message)</div><div class="ttdoc">Copyright 2016 Google Inc. </div><div class="ttdef"><b>Definition:</b> <a href="base_2static__assert_8h_source.html#l00035">static_assert.h:35</a></div></div>
</div><!-- fragment -->
<p>Declares and thread-safely assigns the value of a static variable. </p>

<p>Definition at line <a class="el" href="staticsafedeclare_8h_source.html#l00080">80</a> of file <a class="el" href="staticsafedeclare_8h_source.html">staticsafedeclare.h</a>.</p>

<p>Referenced by <a class="el" href="staticsafedeclare_8cc_source.html#l00054">ion::base::StaticDeleterDeleter::GetInstance()</a>.</p>

</div>
</div>
<a class="anchor" id="a75fb1742f40edab3be7662c85c42b605"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ION_DECLARE_SAFE_STATIC_ARRAY</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="tracinghandler_8cc.html#ab6f4e6d3fde00ce906e46494f60dfe7a">type</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">variable, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">count&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><a class="code" href="staticsafedeclare_8h.html#a61710c07e72109c2b6810e3192e526a6">ION_DECLARE_SAFE_STATIC</a>(                                              \</div>
<div class="line">      <a class="code" href="printer_8cc.html#a75b160f574a0be26114bae2c7686a5e1">type</a>*,                                                            \</div>
<div class="line">      variable,                                                         \</div>
<div class="line">      <span class="keyword">new</span> <a class="code" href="printer_8cc.html#a75b160f574a0be26114bae2c7686a5e1">type</a>[count],                                                  \</div>
<div class="line">      <a class="code" href="classion_1_1base_1_1_static_deleter_deleter.html#afd5ade77393ac7407c92860eabcd4138">ion::base::StaticDeleterDeleter::GetInstance</a>()-&gt;AddArrayToDelete, \</div>
<div class="line">      <span class="keyword">delete</span>[])</div>
<div class="ttc" id="printer_8cc_html_a75b160f574a0be26114bae2c7686a5e1"><div class="ttname"><a href="printer_8cc.html#a75b160f574a0be26114bae2c7686a5e1">type</a></div><div class="ttdeci">std::string type</div><div class="ttdef"><b>Definition:</b> <a href="printer_8cc_source.html#l00353">printer.cc:353</a></div></div>
<div class="ttc" id="staticsafedeclare_8h_html_a61710c07e72109c2b6810e3192e526a6"><div class="ttname"><a href="staticsafedeclare_8h.html#a61710c07e72109c2b6810e3192e526a6">ION_DECLARE_SAFE_STATIC</a></div><div class="ttdeci">#define ION_DECLARE_SAFE_STATIC(type, variable, constructor, add_func, destroyer)</div><div class="ttdoc">Declares and thread-safely assigns the value of a static variable. </div><div class="ttdef"><b>Definition:</b> <a href="staticsafedeclare_8h_source.html#l00080">staticsafedeclare.h:80</a></div></div>
<div class="ttc" id="classion_1_1base_1_1_static_deleter_deleter_html_afd5ade77393ac7407c92860eabcd4138"><div class="ttname"><a href="classion_1_1base_1_1_static_deleter_deleter.html#afd5ade77393ac7407c92860eabcd4138">ion::base::StaticDeleterDeleter::GetInstance</a></div><div class="ttdeci">static StaticDeleterDeleter * GetInstance()</div><div class="ttdoc">Returns a pointer to the global instance. </div><div class="ttdef"><b>Definition:</b> <a href="staticsafedeclare_8cc_source.html#l00054">staticsafedeclare.cc:54</a></div></div>
</div><!-- fragment -->
<p>Use the below ION_DECLARE_STATIC to declare static variables. </p>
<p>Declares a static array variable. </p>

<p>Definition at line <a class="el" href="staticsafedeclare_8h_source.html#l00102">102</a> of file <a class="el" href="staticsafedeclare_8h_source.html">staticsafedeclare.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa0c4d1e0fc76f7ea923240084c166b4c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ION_DECLARE_SAFE_STATIC_POINTER</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="tracinghandler_8cc.html#ab6f4e6d3fde00ce906e46494f60dfe7a">type</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">variable&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><a class="code" href="staticsafedeclare_8h.html#a61710c07e72109c2b6810e3192e526a6">ION_DECLARE_SAFE_STATIC</a>(                                                \</div>
<div class="line">      <a class="code" href="printer_8cc.html#a75b160f574a0be26114bae2c7686a5e1">type</a>*,                                                              \</div>
<div class="line">      variable,                                                           \</div>
<div class="line">      <span class="keyword">new</span> <a class="code" href="printer_8cc.html#a75b160f574a0be26114bae2c7686a5e1">type</a>,                                                           \</div>
<div class="line">      <a class="code" href="classion_1_1base_1_1_static_deleter_deleter.html#afd5ade77393ac7407c92860eabcd4138">ion::base::StaticDeleterDeleter::GetInstance</a>()-&gt;AddPointerToDelete, \</div>
<div class="line">      <span class="keyword">delete</span>)</div>
<div class="ttc" id="printer_8cc_html_a75b160f574a0be26114bae2c7686a5e1"><div class="ttname"><a href="printer_8cc.html#a75b160f574a0be26114bae2c7686a5e1">type</a></div><div class="ttdeci">std::string type</div><div class="ttdef"><b>Definition:</b> <a href="printer_8cc_source.html#l00353">printer.cc:353</a></div></div>
<div class="ttc" id="staticsafedeclare_8h_html_a61710c07e72109c2b6810e3192e526a6"><div class="ttname"><a href="staticsafedeclare_8h.html#a61710c07e72109c2b6810e3192e526a6">ION_DECLARE_SAFE_STATIC</a></div><div class="ttdeci">#define ION_DECLARE_SAFE_STATIC(type, variable, constructor, add_func, destroyer)</div><div class="ttdoc">Declares and thread-safely assigns the value of a static variable. </div><div class="ttdef"><b>Definition:</b> <a href="staticsafedeclare_8h_source.html#l00080">staticsafedeclare.h:80</a></div></div>
<div class="ttc" id="classion_1_1base_1_1_static_deleter_deleter_html_afd5ade77393ac7407c92860eabcd4138"><div class="ttname"><a href="classion_1_1base_1_1_static_deleter_deleter.html#afd5ade77393ac7407c92860eabcd4138">ion::base::StaticDeleterDeleter::GetInstance</a></div><div class="ttdeci">static StaticDeleterDeleter * GetInstance()</div><div class="ttdoc">Returns a pointer to the global instance. </div><div class="ttdef"><b>Definition:</b> <a href="staticsafedeclare_8cc_source.html#l00054">staticsafedeclare.cc:54</a></div></div>
</div><!-- fragment -->
<p>Declare a static non-array pointer and calls a default constructor. </p>

<p>Definition at line <a class="el" href="staticsafedeclare_8h_source.html#l00111">111</a> of file <a class="el" href="staticsafedeclare_8h_source.html">staticsafedeclare.h</a>.</p>

<p>Referenced by <a class="el" href="vsyncprofiler_8cc_source.html#l00030">ion::profile::VSyncProfiler::Get()</a>, <a class="el" href="gpuprofiler_8cc_source.html#l00026">ion::gfxprofile::GpuProfiler::Get()</a>, <a class="el" href="profiling_8cc_source.html#l00025">ion::profile::GetCallTraceManager()</a>, and <a class="el" href="base_2logging_8cc_source.html#l00111">ion::base::logging_internal::Logger::~Logger()</a>.</p>

</div>
</div>
<a class="anchor" id="a09452e33f7fe6f55ae0bc4ca75152dac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ION_DECLARE_SAFE_STATIC_POINTER_WITH_CONSTRUCTOR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="tracinghandler_8cc.html#ab6f4e6d3fde00ce906e46494f60dfe7a">type</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">variable, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">constructor&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><a class="code" href="staticsafedeclare_8h.html#a61710c07e72109c2b6810e3192e526a6">ION_DECLARE_SAFE_STATIC</a>(                                                \</div>
<div class="line">      <a class="code" href="printer_8cc.html#a75b160f574a0be26114bae2c7686a5e1">type</a>*,                                                              \</div>
<div class="line">      variable,                                                           \</div>
<div class="line">      constructor,                                                        \</div>
<div class="line">      <a class="code" href="classion_1_1base_1_1_static_deleter_deleter.html#afd5ade77393ac7407c92860eabcd4138">ion::base::StaticDeleterDeleter::GetInstance</a>()-&gt;AddPointerToDelete, \</div>
<div class="line">      <span class="keyword">delete</span>)</div>
<div class="ttc" id="printer_8cc_html_a75b160f574a0be26114bae2c7686a5e1"><div class="ttname"><a href="printer_8cc.html#a75b160f574a0be26114bae2c7686a5e1">type</a></div><div class="ttdeci">std::string type</div><div class="ttdef"><b>Definition:</b> <a href="printer_8cc_source.html#l00353">printer.cc:353</a></div></div>
<div class="ttc" id="staticsafedeclare_8h_html_a61710c07e72109c2b6810e3192e526a6"><div class="ttname"><a href="staticsafedeclare_8h.html#a61710c07e72109c2b6810e3192e526a6">ION_DECLARE_SAFE_STATIC</a></div><div class="ttdeci">#define ION_DECLARE_SAFE_STATIC(type, variable, constructor, add_func, destroyer)</div><div class="ttdoc">Declares and thread-safely assigns the value of a static variable. </div><div class="ttdef"><b>Definition:</b> <a href="staticsafedeclare_8h_source.html#l00080">staticsafedeclare.h:80</a></div></div>
<div class="ttc" id="classion_1_1base_1_1_static_deleter_deleter_html_afd5ade77393ac7407c92860eabcd4138"><div class="ttname"><a href="classion_1_1base_1_1_static_deleter_deleter.html#afd5ade77393ac7407c92860eabcd4138">ion::base::StaticDeleterDeleter::GetInstance</a></div><div class="ttdeci">static StaticDeleterDeleter * GetInstance()</div><div class="ttdoc">Returns a pointer to the global instance. </div><div class="ttdef"><b>Definition:</b> <a href="staticsafedeclare_8cc_source.html#l00054">staticsafedeclare.cc:54</a></div></div>
</div><!-- fragment -->
<p>Declare a static non-array pointer and calls a non-default constructor. </p>
<p>The constructor parameter must be enclosed in parenthesis for the macro to expand correctly. </p>

<p>Definition at line <a class="el" href="staticsafedeclare_8h_source.html#l00122">122</a> of file <a class="el" href="staticsafedeclare_8h_source.html">staticsafedeclare.h</a>.</p>

<p>Referenced by <a class="el" href="base_2logging_8cc_source.html#l00197">ion::base::GetDefaultLogEntryWriter()</a>, and <a class="el" href="renderer_8cc_source.html#l05473">ion::gfx::Renderer::GetStateTable()</a>.</p>

</div>
</div>
<a class="anchor" id="a7c9d62f0fdfa9f872c0be86110a97a2c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ION_SAFE_ASSIGN_STATIC_POINTER</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="tracinghandler_8cc.html#ab6f4e6d3fde00ce906e46494f60dfe7a">type</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">variable, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">new_variable, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">add_func, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">destroyer&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><a class="code" href="printer_8cc.html#a75b160f574a0be26114bae2c7686a5e1">type</a> null = NULL;                                              \</div>
<div class="line">  if (variable.compare_exchange_strong(null, new_variable)) {    \</div>
<div class="line">    add_func(#<a class="code" href="printer_8cc.html#a75b160f574a0be26114bae2c7686a5e1">type</a>, new_variable);                               \</div>
<div class="line">  } <span class="keywordflow">else</span> {                                                       \</div>
<div class="line">    destroyer new_variable;                                      \</div>
<div class="line">  }</div>
<div class="ttc" id="printer_8cc_html_a75b160f574a0be26114bae2c7686a5e1"><div class="ttname"><a href="printer_8cc.html#a75b160f574a0be26114bae2c7686a5e1">type</a></div><div class="ttdeci">std::string type</div><div class="ttdef"><b>Definition:</b> <a href="printer_8cc_source.html#l00353">printer.cc:353</a></div></div>
</div><!-- fragment -->
<p>Copyright 2016 Google Inc. </p>
<p>All Rights Reserved.</p>
<p>Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at </p>
<pre class="fragment">http://www.apache.org/licenses/LICENSE-2.0
</pre><p>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS-IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.Use the below ION_DECLARE_STATIC_* macros to safely initialize a local static pointer variable with 4- or 8-byte size. These macros will not work for global statics, and these macros are not necessary for POD (Plain Old Datatype) variables.</p>
<p>For example, to safely create a function that returns a singleton instance: MySingletonClass* GetSingleton() { ION_DECLARE_SAFE_STATIC_POINTER_WITH_CONSTRUCTOR( MySingletonClass, s_singleton, (new MySingletonClass(arg1, arg2))); return s_singleton; } The macro declares s_singleton with the right type and initializes it with the passed constructor.</p>
<p>Some more examples:</p>
<p>///&lt; Declare foo_ptr as a pointer to a single int. <a class="el" href="staticsafedeclare_8h.html#aa0c4d1e0fc76f7ea923240084c166b4c" title="Declare a static non-array pointer and calls a default constructor. ">ION_DECLARE_SAFE_STATIC_POINTER(int, foo_ptr)</a>; ///&lt; Declare foo_array as an int* of 10 ints. <a class="el" href="staticsafedeclare_8h.html#a75fb1742f40edab3be7662c85c42b605" title="Use the below ION_DECLARE_STATIC to declare static variables. ">ION_DECLARE_SAFE_STATIC_ARRAY(int, foo_array, 10)</a>; ///&lt; Declare foo_struct as a pointer to MyStructDeletedSecond. <a class="el" href="staticsafedeclare_8h.html#aa0c4d1e0fc76f7ea923240084c166b4c" title="Declare a static non-array pointer and calls a default constructor. ">ION_DECLARE_SAFE_STATIC_POINTER(MyStructDeletedSecond, foo_struct)</a>; ///&lt; Declare foo_struct2 as a pointer to MyStructDeletedFirst, calling a ///&lt; non-default constructor. The constructor must be in parentheses for the ///&lt; macro to expand correctly. ION_DECLARE_SAFE_STATIC_POINTER_WITH_CONSTRUCTOR( MyStructDeletedFirst, foo_struct2, (new MyStructDeletedFirst(2)));</p>
<p>All pointer-types initialized with ION_DECLARE_STATIC_* are added to a static vector of pointers through the StaticDeleter class, below. StaticDeleter is derived from Shareable so it can be managed by a SharedPtr. When it is destroyed as the program exits it cleans up any pointers that were added to it in the reverse order they were created. This ensures proper dependency handling. Uses AtomicCompareAndSwap to uniquely set the value of variable with new_variable. If the swap fails then destroys new_variable. </p>

<p>Definition at line <a class="el" href="staticsafedeclare_8h_source.html#l00070">70</a> of file <a class="el" href="staticsafedeclare_8h_source.html">staticsafedeclare.h</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_e914ee4d4a44400f1fdb170cb4ead18a.html">base</a></li><li class="navelem"><a class="el" href="staticsafedeclare_8h.html">staticsafedeclare.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
